---
title: 矢澤にこ言語が完成（※）しました
tags: Haskell, 日記
---

# Haskell製にこ言語

- [にこ言語について](#about-nico-lang)
- [aiya000/nico-lang - GitHub](https://github.com/aiya000/nico-lang)

![合宿所の近くの海](/images/posts/2016-12-30-study_camp_with_nico_lang/sea.png)


# 謎の集団で合宿に行ってきた
　某所に技術関連の集まりで技術合宿をしてきました。  
各位、目的は各々で決めていく感じの3日連続もくもく会という感じです。

- 僕の主観内で観測された各位の動き
    - DeepLearning
        - Tensorflow
    - VR
        - Unity + Android
    - ラズパイ電子工作
        - Lチカ
    - AngularJS1の勉強
    - Javaの勉強
    - CentOSデスクトップ環境構築
        - Archデスクトップ環境構築だったはずが、いつの間にかCentOSに変わっていた
    - LinuQuestという謎の企画について


# DeepLearningの挫折から入る

- 僕の合宿の予定
    1. にこちゃん作りたい
    2. にこちゃん作りたいので、深層学習学ぶ
    3. 深層学習で「にこちゃんへたれ判定bot」を作る

- 実際
    1. にこちゃん作りたい
    2. Tensorflow学ぶ
    3. Tensorflow難しすぎてムリになる

ということで、にこちゃん言語の定義と処理系作成に馳せ参じることになりました。


# <a name="about-nico-lang">にこ言語</a>
## にこ言語とは
　Brainf\*ckの方言です。

- [にこ言語の仕様](https://github.com/aiya000/nico-lang/blob/master/BNF.md)

　Brainf\*ckの各命令（以下の表の左辺）は、右辺の文字列に割当たります。

```
> : 笑顔届ける矢澤にこにこ！
< : だめだめだめっ！
+ : にっこにっこにー
- : にこにーって覚えてラブニコ！
. : ぴょんぴょんぴょんっ！
, : あなたのハートににこにこにー！
[ : にこにーはみんなのもの！
] : ｷﾓﾁﾜﾙｲ
```

　BNFの練習のためにも、意味論はBNFで書いてみました。  
こんな感じ。

```bnf
<code>       ::= <empty-code> | <operation> | <operation> <code>
<empty-code> ::= ""

<operation> ::= <forward> | <backword> | <increment> | <decrement> | <output> | <input> | <loop>

<loop> ::= <loop-begin> <code> <loop-end>

<forward>    ::= "笑顔届ける矢澤にこにこ！"
<backword>   ::= "だめだめだめっ！"
<increment>  ::= "にっこにっこにー"
<decrement>  ::= "にこにーって覚えてラブニコ！"
<output>     ::= "ぴょんぴょんぴょんっ！"
<input>      ::= "あなたのハートににこにこにー！"
<loop-begin> ::= "にこにーはみんなのもの！"
<loop-end>   ::= "ｷﾓﾁﾜﾙｲ"
```

　「Hello」と出力するコードはこうなります。

```
笑顔届ける矢澤にこにこ！にっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにこにーはみんなのもの！だめだめだめっ！にっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにー笑顔届ける矢澤にこにこ！にこにーって覚えてラブニコ！ｷﾓﾁﾜﾙｲだめだめだめっ！ぴょんぴょんぴょんっ！笑顔届ける矢澤にこにこ！笑顔届ける矢澤にこにこ！にっこにっこにーにっこにっこにーにっこにっこにーにこにーはみんなのもの！だめだめだめっ！にっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにー笑顔届ける矢澤にこにこ！にこにーって覚えてラブニコ！ｷﾓﾁﾜﾙｲだめだめだめっ！ぴょんぴょんぴょんっ！笑顔届ける矢澤にこにこ！笑顔届ける矢澤にこにこ！にっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにこにーはみんなのもの！だめだめだめっ！にっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにー笑顔届ける矢澤にこにこ！にこにーって覚えてラブニコ！ｷﾓﾁﾜﾙｲだめだめだめっ！ぴょんぴょんぴょんっ！笑顔届ける矢澤にこにこ！笑顔届ける矢澤にこにこ！にっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにこにーはみんなのもの！だめだめだめっ！にっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにー笑顔届ける矢澤にこにこ！にこにーって覚えてラブニコ！ｷﾓﾁﾜﾙｲだめだめだめっ！ぴょんぴょんぴょんっ！笑顔届ける矢澤にこにこ！笑顔届ける矢澤にこにこ！にっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにこにーはみんなのもの！だめだめだめっ！にっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにーにっこにっこにー笑顔届ける矢澤にこにこ！にこにーって覚えてラブニコ！ｷﾓﾁﾜﾙｲだめだめだめっ！にっこにっこにーぴょんぴょんぴょんっ！笑顔届ける矢澤にこにこ！
```

いいね！

![椰子の木みたいなの](/images/posts/2016-12-30-study_camp_with_nico_lang/wood.png)


## 合宿中進捗について
　パーサーと、デバッグのためのBrainf\*ck形式への変換までを実装しました。  
というわけで、本記事のタイトル中の「**※**」の回収です。

※
<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">矢澤にこちゃん言語の実行器が完成しなかったけど、パーサーは完成したし、brainfckへのトランスパイルもできるようになってるので、実質完成では？？？</p>&mdash; あいや@型無しラムダ計算 (@public_ai000ya) <a href="https://twitter.com/public_ai000ya/status/814308640714674176">2016年12月29日</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

合宿中の最後のcommitは[これ](https://github.com/aiya000/nico-lang/commit/c10f0418d2c8011baddd23ef731f362aa258e5a9)になります。


# 合宿での学び
　にこ言語はHaskellで開発しているのですが、Haskellの型システム周りは最強なので、こういったことができます。

<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">Haskellで型定義をしてから実定義はundefinedでコンパイル（BDD？）<br>その後テスト書いてテストセカンド。<br>最後に実定義を書くという手法が最高になりましたので、よろしく。</p>&mdash; あいや@型無しラムダ計算 (@public_ai000ya) <a href="https://twitter.com/public_ai000ya/status/814072579681984513">2016年12月28日</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

　短い合宿期間中（※）の結構な部分は、この学び及びHaskellのテスト技法の探りに費やされましたが、わりといい学びだったと思います。  
誰かHaskellのtastyでの、`IO ()`での標準入力と標準出力の扱い方を教えて。

※ ２泊３日中の１日目はDeepLeaningで潰した

![夜の海](/images/posts/2016-12-30-study_camp_with_nico_lang/at_night.png)


# 結論
　合宿中に にこ言語 完成しなかったよ…。
